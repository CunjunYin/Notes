# Factory Method

Provide an interface for creating objects, and let subclasses decide which class to instantiate. The Factory method let a class to execute it's functionaloty without knowing the underlying implementation. The functionaloty implementation is done by subclasses.




This allows for greater flexibility in the creation of objects and promotes the use of polymorphism.

Use Factory Method design pattern when
1. If a class needs to create an object of an interface, but does not know the specific implementation, in this case, the factory method pattern can be used to delay the creation of the object to the subclass for implementation.

2. If a class itself wants its subclasses to create the required objects, it should use the factory method pattern.

## Example

### Product Class: `Device`
```c#
namespace FactoryMethod.Device;

/// <summary>
/// Interface of the object created by the factory method
/// </summary>
public interface IDevice
{
    public void DeviceType();
}

public class LaptopDevice: IDevice
{
    public void DeviceType()
    {
        Console.WriteLine("Laptop Device");
    }
}

public class MobileDevice : IDevice
{
    public void DeviceType()
    {
        Console.WriteLine("Mobile Device");
    }
}

public class WatchDevice: IDevice
{
    public void DeviceType()
    {
        Console.WriteLine("Watch Device");
    }
}
```

### Factory Method Abstract Creator
In factory method, usually the parent class is an abstract class, contain abstract methods for creating the required instance. These abstract methods are called as factory methods. The method `MakeDevice()` is an abstract method.

```c# 
namespace FactoryMethod.Factory;

/// <summary>
/// Abstract Creator, which declares the factory method to create object
/// </summary>
public abstract class DeviceFactory
{
    protected abstract IDevice MakeDevice();
    public IDevice CreateDevice()
    {
        return this.MakeDevice();
    }
}
```

### Factory Method Concrete Creator
In the factory method, the instance is created by other methods in the Creator. In the case blow is `MakeDevice()`
```c#
namespace FactoryMethod.Factory;

public class LaptopFactroy: DeviceFactory
{
    protected override IDevice MakeDevice()
    {
        IDevice product = new LaptopDevice();
        return product;
    }
}

public class MobileFactroy : DeviceFactory
{
    protected override IDevice MakeDevice()
    {
        IDevice product = new MobileDevice();
        return product;
    }
}

public class WatchFactroy : DeviceFactory
{
    protected override IDevice MakeDevice()
    {
        IDevice product = new WatchDevice();
        return product;
    }
}
```

### Main Program
In the implementation of the factory method, parameters may be required to decide which specific instance to create
```c#
using FactoryMethod.Device;
using FactoryMethod.Factory;
namespace FactoryMethod;
public class Program
{
    public static void Main(string[] args)
    {
        if (args.Length == 1)
        {
            string OS = args[0];
            IDevice device;
            if (OS == "laptop") // dotnet run laptop
            {
                device = new LaptopFactroy().CreateDevice();
                device.DeviceType();
            }

            else if (OS == "mobile") // dotnet run mobile
            {
                device = new MobileFactroy().CreateDevice();
                device.DeviceType();
            }

            else // dotnet run
            {
                device = new WatchFactroy().CreateDevice();
                device.DeviceType();
            }
        }
    }
}
```

## Advantages
Encapsulation: The Factory Method pattern encapsulates the creation of objects, making it easier to modify the creation process without affecting the client code.

Flexibility: The Factory Method pattern allows for greater flexibility in the creation of objects, since subclasses can determine which class to instantiate based on their specific needs.

Polymorphism: The Factory Method pattern promotes the use of polymorphism, which allows for the creation of objects with different behavior based on their type.

Testing: The Factory Method pattern can make it easier to test code, since it allows for the creation of mock objects that can be used to test the client code without having to create real objects.

##