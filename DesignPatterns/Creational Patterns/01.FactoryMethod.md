# Factory Method

Provide an interface for creating objects, and let subclasses decide which class to instantiate. The Factory method lets a class defer instantiation it uses to subclasses by separate the process of creating objects from the client code that uses them.  This allows for greater flexibility in the creation of objects and promotes the use of polymorphism.

## Example

### Product Class `Device`
```c#
namespace FactoryMethod.Device;

public interface IDevice
{
    public void DeviceType();
}

public class LaptopDevice: IDevice
{
    public void DeviceType()
    {
        Console.WriteLine("Laptop Device");
    }
}

public class MobileDevice : IDevice
{
    public void DeviceType()
    {
        Console.WriteLine("Mobile Device");
    }
}

public class WatchDevice: IDevice
{
    public void DeviceType()
    {
        Console.WriteLine("Watch Device");
    }
}
```

### Factory Method Abstract Creator
```c# 
namespace FactoryMethod.Factory;

public abstract class DeviceFactory
{
    protected abstract IDevice MakeDevice();
    public IDevice CreateDevice()
    {
        return this.MakeDevice();
    }
}
```

### Factory Method Concrete Creator
```c#
namespace FactoryMethod.Factory;

public class LaptopFactroy: DeviceFactory
{
    protected override IDevice MakeDevice()
    {
        IDevice product = new LaptopDevice();
        return product;
    }
}

public class MobileFactroy : DeviceFactory
{
    protected override IDevice MakeDevice()
    {
        IDevice product = new MobileDevice();
        return product;
    }
}

public class WatchFactroy : DeviceFactory
{
    protected override IDevice MakeDevice()
    {
        IDevice product = new WatchDevice();
        return product;
    }
}
```

### Main Program
```c#
using FactoryMethod.Device;
using FactoryMethod.Factory;
namespace FactoryMethod;
public class Program
{
    public static void Main(string[] args)
    {
        if (args.Length == 1)
        {
            string OS = args[0];
            IDevice device;
            if (OS == "laptop") // dotnet run laptop
            {
                device = new LaptopFactroy().CreateDevice();
                device.DeviceType();
            }

            else if (OS == "mobile") // dotnet run mobile
            {
                device = new MobileFactroy().CreateDevice();
                device.DeviceType();
            }

            else // dotnet run
            {
                device = new WatchFactroy().CreateDevice();
                device.DeviceType();
            }
        }
    }
}
```